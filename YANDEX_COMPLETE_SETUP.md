# Полная настройка Yandex Cloud AI Assistant

## Шаг 1: Заполнение заголовков запроса (Заголовки запроса)

В разделе **"Параметры HTTPS-метода" → "Заголовки запроса"** добавьте:

**Заголовок 1:**
- **Имя:** `Authorization`
- **Значение:** `Bearer {YANDEX_CLOUD_API_KEY}`
  - ⚠️ Замените `{YANDEX_CLOUD_API_KEY}` на ваш реальный API ключ
  - Или используйте переменную, если интерфейс поддерживает

**Заголовок 2:**
- **Имя:** `Content-Type`
- **Значение:** `application/json`

## Шаг 2: Параметры инструмента (Параметры инструмента)

В разделе **"Параметры инструмента"** добавьте параметры:

**Параметр 1:**
- **Имя:** `prompt_id`
- **Тип:** Строка
- **Описание:** ID промпта ассистента

**Параметр 2:**
- **Имя:** `input_text`
- **Тип:** Строка
- **Описание:** Текст статьи для обработки

**Параметр 3 (опционально):**
- **Имя:** `style`
- **Тип:** Строка
- **Описание:** Стиль рерайта (scientific, meme, casual)

## Шаг 3: Сохранение и получение данных

1. **Сохраните инструмент** (кнопка "Сохранить" или "Создать")
2. **Скопируйте ID инструмента** (он понадобится для `YANDEX_CLOUD_ASSISTANT_ID`)
3. **Убедитесь, что у вас есть API ключ** (если нет - создайте в разделе IAM)

## Шаг 4: Добавление в приложение

Откройте файл `Backend/BOT_TOKEN.env` и добавьте:

```env
BOT_TOKEN=8223416474:AAEr8DXOtlNzIR25B7vm3v37hTZPfPKw5BM
PORT=5000
YANDEX_CLOUD_API_KEY=ваш_реальный_api_ключ_здесь
YANDEX_CLOUD_PROJECT=b1goig30m707ojip72c7
YANDEX_CLOUD_ASSISTANT_ID=id_вашего_инструмента_здесь
```

**Где взять:**
- `YANDEX_CLOUD_API_KEY` - из раздела IAM → API ключи в Yandex Cloud Console
- `YANDEX_CLOUD_ASSISTANT_ID` - это ID инструмента, который вы только что создали
- `YANDEX_CLOUD_PROJECT` - ID вашего проекта (уже указан)

## Шаг 5: Перезапуск бэкенда

1. Остановите бэкенд (Ctrl+C)
2. Запустите снова:
   ```powershell
   cd Backend
   python server.py
   ```

3. Проверьте логи - должно появиться:
   ```
   INFO:__main__:Yandex Cloud API клиент инициализирован
   ```

## Шаг 6: Тестирование

1. Откройте сайт в браузере
2. Введите URL статьи
3. Выберите стиль рерайта
4. Нажмите "Рерайт статьи"
5. Должен появиться результат

## Если что-то не работает:

1. **Проверьте логи бэкенда** - там будут ошибки, если что-то не так
2. **Проверьте, что API ключ правильный** - в логах не должно быть предупреждения о отсутствии ключа
3. **Проверьте формат запроса** - возможно, нужно изменить структуру JSON в коде под формат вашего инструмента

## Важно:

⚠️ Если интерфейс Yandex Cloud использует другой формат запроса, чем в коде, возможно потребуется изменить функцию `rewrite_article_with_yandex` в файле `Backend/server.py` под формат вашего инструмента.

