# Варианты реализации подбора изображений к новостям

## Вариант 1: Извлечение изображения из исходной статьи ⭐ (Самый простой)

### Как работает:
1. При парсинге статьи ищем изображения в HTML
2. Приоритет: `og:image` → `article:image` → первое крупное изображение
3. Возвращаем URL изображения вместе с текстом

### Плюсы:
- ✅ Быстро и бесплатно
- ✅ Изображение точно релевантно статье
- ✅ Не требует внешних API
- ✅ Простая реализация

### Минусы:
- ❌ Может не быть изображения
- ❌ Изображение может быть низкого качества
- ❌ Может быть логотип сайта вместо иллюстрации

### Код:
```python
def extract_image_from_url(url):
    """Извлекает изображение из статьи"""
    # Ищем og:image, article:image, или первое крупное img
    # Возвращаем URL изображения
```

---

## Вариант 2: Поиск через бесплатные API (Unsplash, Pexels, Pixabay)

### Как работает:
1. Извлекаем ключевые слова из статьи (первые 3-5 слов)
2. Ищем изображение через API (например, Unsplash)
3. Возвращаем URL найденного изображения

### Плюсы:
- ✅ Качественные стоковые изображения
- ✅ Бесплатные API с хорошими лимитами
- ✅ Большой выбор изображений

### Минусы:
- ❌ Требуется регистрация и API ключи
- ❌ Может быть не очень релевантно
- ❌ Лимиты на количество запросов

### Примеры API:
- **Unsplash**: 50 запросов/час бесплатно
- **Pexels**: 200 запросов/час бесплатно
- **Pixabay**: 100 запросов/минуту бесплатно

---

## Вариант 3: Yandex Images API

### Как работает:
1. Извлекаем ключевые слова из статьи
2. Ищем через Yandex Images API
3. Возвращаем первое релевантное изображение

### Плюсы:
- ✅ Хорошая релевантность для русскоязычного контента
- ✅ Можно использовать Yandex Cloud (уже настроен)
- ✅ Большая база изображений

### Минусы:
- ❌ Может потребоваться настройка API
- ❌ Возможны ограничения использования

---

## Вариант 4: Генерация через AI (DALL-E, Kandinsky)

### Как работает:
1. Анализируем содержание статьи
2. Генерируем промпт для AI
3. Генерируем изображение через AI
4. Возвращаем URL сгенерированного изображения

### Плюсы:
- ✅ Уникальные изображения
- ✅ Полный контроль над стилем
- ✅ Всегда есть изображение

### Минусы:
- ❌ Дорого (генерация стоит денег)
- ❌ Медленно (10-30 секунд на генерацию)
- ❌ Может быть нерелевантно
- ❌ Требует настройки AI API

### Варианты:
- **Kandinsky** (Yandex Cloud) - уже есть доступ
- **DALL-E** (OpenAI) - нужно отдельный API ключ
- **Stable Diffusion** - можно хостить самому

---

## Вариант 5: Комбинированный подход ⭐⭐⭐ (РЕКОМЕНДУЮ)

### Как работает:
1. **Сначала** пытаемся извлечь изображение из исходной статьи
2. **Если нет** - ищем через бесплатный API (Pexels/Unsplash)
3. **Если не найдено** - используем заглушку или генерируем через AI (опционально)

### Плюсы:
- ✅ Максимальная релевантность
- ✅ Всегда есть результат
- ✅ Оптимальный баланс скорости и качества
- ✅ Можно настроить приоритеты

### Минусы:
- ❌ Более сложная реализация
- ❌ Может потребоваться несколько API ключей

---

## Рекомендация

**Начать с Варианта 1** (извлечение из статьи) - это быстро и просто.

**Затем добавить Вариант 2** (поиск через Pexels) как fallback.

**В будущем** можно добавить AI генерацию для особых случаев.

---

## Что нужно для реализации:

### Вариант 1 (извлечение):
- Ничего дополнительного не нужно
- Просто расширить функцию `extract_text_from_url()`

### Вариант 2 (API поиск):
- Зарегистрироваться на Pexels.com
- Получить API ключ (бесплатно)
- Добавить в `BOT_TOKEN.env`: `PEXELS_API_KEY=ваш_ключ`

### Вариант 4 (AI генерация):
- Использовать Kandinsky через Yandex Cloud (уже настроен)
- Или получить API ключ OpenAI для DALL-E

---

## Какой вариант выбираем?

1. **Вариант 1** - быстро, просто, бесплатно
2. **Вариант 2** - качественные изображения, нужен API ключ
3. **Вариант 5** - лучший результат, комбинация подходов

